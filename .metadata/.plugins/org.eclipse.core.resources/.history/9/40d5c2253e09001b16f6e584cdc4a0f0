package hk.edu.hkbu.comp;

import java.io.*;
import java.nio.file.Files;
import java.nio.file.Paths;

public class MyDatabase {
	File file;
	FileWriter myWriter ;
	
	MyWebsite web;
	
	public MyDatabase(String filename){
		try {
			file = new File(filename); 
			if(file.createNewFile())
				System.out.println("Created File.");
			else
				System.out.println("Opened File.");
			myWriter = new FileWriter(file,true);
		}catch(IOException e){
			e.printStackTrace();
		}
	} 
	
	public void newWebsite(String url) {
		web = new MyWebsite(url);
	}
	
	public void addTitle(String txt) {
		web.add("title", txt);
	}
	
	public void addContent(String txt) {
		web.add("content", txt);
	}
	
	public void save() {
		//FileWriter myWriter = new FileWriter(file);
		//BufferedWriter bw = new BufferedWriter(myWriter);
	    //PrintWriter out = new PrintWriter(bw);
		try {
			BufferedWriter bw = new BufferedWriter(myWriter);
			bw.newLine();
			bw.write(web.getJSON().toString());
			bw.flush();
			//out.println(web.getJSON().toString());
			System.out.println("Successfully wrote to the file.");
		} catch (Exception e) {
			System.out.println("An error occurred.");
			e.printStackTrace();
		}
	}
}